import{S as we,i as Te,s as Ne,k as L,q as F,a as O,l as M,m as B,r as P,h as S,c as V,n as N,b as R,G as _,J as G,u as ie,g as z,v as ce,f as fe,K as Se,L as $,d as W,M as ve,N as Ce,I as Z,O as Ie,P as ue,H as Pe,Q as Oe,R as st,w as Ve,e as ge,p as be,T as Tt,U as St,V as Ct,y as ze,z as Xe,A as He,W as It,B as Re,X as de,Y as Lt}from"../chunks/index.e5f0f49b.js";import{w as Le}from"../chunks/index.34c7cd5a.js";const ye=Le([0,1]),_e=Le(Array(6)),ne=Le(Array(6).fill(0)),ke=Le(["Unit 1","Unit 2"]);function ae(t,e,l){const n=[];for(let r=0;r<l;r++)n.push(t+e*r);return n}const rt=[{name:"BS",value:ae(42,6,9)},{name:"AMoE",value:ae(70,6,8)},{name:"CWA",value:ae(42,20,8)},{name:"Extreme Nova",value:ae(60,5,30)},{name:"SR",value:ae(110,10,10)},{name:"AR",value:ae(45,4,30)},{name:"3 x BS (var 2)",value:[42,48,54,60,66,72,78,84,90,95,101,107,113,119,125,131,137,143,148,154,160,166,172,178,184,190,196]},{name:"3 x AMoE",value:[70,76,82,88,94,100,106,112,123,129,135,141,147,153,159,165,176,182,188,194,200,206,212,218]},{name:"old 3 x BS (var 1)",value:[42,48,54,60,66,72,78,84,90,96,102,108,114,120,126,132,138,144,150,156,162,168,174,180,186,192,198]},{name:"Mystic Breath",value:[42,50,58,66,74,82,90,98,106,114,122,130,138,146,154,162]}];function Ee(t,{delay:e=0,duration:l=400}){const n=getComputedStyle(t).height,r=Number(n.match(/\d+/)),u=getComputedStyle(t).marginTop,s=Number(u.match(/\d+/));let f=1;return{delay:e,duration:l,css:(p,o)=>`height: ${p*r}px; 
                        margin-top : ${p*s}px;`+`opacity : ${p*f}`}}function at(t,{delay:e=0,duration:l=400}){const n=getComputedStyle(t).width,r=Number(n.match(/\d+/)),u=getComputedStyle(t).marginLeft;Number(u.match(/\d+/));const s=getComputedStyle(t).marginRight;return Number(s.match(/\d+/)),{delay:e,duration:l,css:(f,p)=>`max-width: ${f*r}px;`}}function it(t,e,l){const n=t.slice();return n[15]=e[l],n[16]=e,n[17]=l,n}function ot(t,e,l){const n=t.slice();return n[18]=e[l],n}function ut(t){let e,l=t[18].name+"",n;return{c(){e=L("option"),n=F(l),this.h()},l(r){e=M(r,"OPTION",{class:!0});var u=B(e);n=P(u,l),u.forEach(S),this.h()},h(){e.__value=t[18].value,e.value=e.__value,N(e,"class","svelte-187mbnt")},m(r,u){R(r,e,u),_(e,n)},p:Pe,d(r){r&&S(e)}}}function ct(t){let e,l,n,r,u;return{c(){e=L("input"),this.h()},l(s){e=M(s,"INPUT",{type:!0,inputmode:!0,placeholder:!0,class:!0}),this.h()},h(){N(e,"type","text"),N(e,"inputmode","numeric"),N(e,"placeholder",""),N(e,"class","frame-input svelte-187mbnt")},m(s,f){R(s,e,f),n=!0,r||(u=G(e,"change",function(){Ie(t[8](t[15]))&&t[8](t[15]).apply(this,arguments)}),r=!0)},p(s,f){t=s},i(s){n||(s&&Se(()=>{n&&(l||(l=$(e,at,{duration:200},!0)),l.run(1))}),n=!0)},o(s){s&&(l||(l=$(e,at,{duration:200},!1)),l.run(0)),n=!1},d(s){s&&S(e),s&&l&&l.end(),r=!1,u()}}}function ft(t){let e,l,n,r,u,s,f,p,o,c,h,m=t[3].includes(t[15]),b,y,E,T,d;function i(){t[12].call(l,t[15])}let a=rt,g=[];for(let w=0;w<a.length;w+=1)g[w]=ut(ot(t,a,w));let v=m&&ct(t);return{c(){e=L("div"),l=L("input"),n=O(),r=L("select"),u=L("option"),s=F("Empty");for(let w=0;w<g.length;w+=1)g[w].c();f=L("option"),p=F("Custom"),h=O(),v&&v.c(),b=O(),this.h()},l(w){e=M(w,"DIV",{class:!0});var C=B(e);l=M(C,"INPUT",{type:!0,class:!0}),n=V(C),r=M(C,"SELECT",{name:!0,id:!0,class:!0});var k=B(r);u=M(k,"OPTION",{class:!0});var J=B(u);s=P(J,"Empty"),J.forEach(S);for(let U=0;U<g.length;U+=1)g[U].l(k);f=M(k,"OPTION",{class:!0});var D=B(f);p=P(D,"Custom"),D.forEach(S),k.forEach(S),h=V(C),v&&v.l(C),b=V(C),C.forEach(S),this.h()},h(){N(l,"type","checkbox"),N(l,"class","checky svelte-187mbnt"),u.__value="",u.value=u.__value,N(u,"class","svelte-187mbnt"),f.__value="-1",f.value=f.__value,N(f,"class","svelte-187mbnt"),N(r,"name",o=`${t[0]}-cast${t[15]}`),N(r,"id",c=`${t[0]}-cast${t[15]}`),N(r,"class","selection-menu svelte-187mbnt"),N(e,"class","cast-selection svelte-187mbnt")},m(w,C){R(w,e,C),_(e,l),l.checked=t[4][t[15]],_(e,n),_(e,r),_(r,u),_(u,s);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(r,null);_(r,f),_(f,p),_(e,h),v&&v.m(e,null),_(e,b),E=!0,T||(d=[G(l,"change",i),G(r,"change",function(){Ie(t[7](t[15]))&&t[7](t[15]).apply(this,arguments)})],T=!0)},p(w,C){if(t=w,C&84&&(l.checked=t[4][t[15]]),C&0){a=rt;let k;for(k=0;k<a.length;k+=1){const J=ot(t,a,k);g[k]?g[k].p(J,C):(g[k]=ut(J),g[k].c(),g[k].m(r,f))}for(;k<g.length;k+=1)g[k].d(1);g.length=a.length}(!E||C&5&&o!==(o=`${t[0]}-cast${t[15]}`))&&N(r,"name",o),(!E||C&5&&c!==(c=`${t[0]}-cast${t[15]}`))&&N(r,"id",c),C&12&&(m=t[3].includes(t[15])),m?v?(v.p(t,C),C&12&&z(v,1)):(v=ct(t),v.c(),z(v,1),v.m(e,b)):v&&(ce(),W(v,1,1,()=>{v=null}),fe())},i(w){E||(z(v),w&&Se(()=>{E&&(y||(y=$(e,Ee,{duration:400},!0)),y.run(1))}),E=!0)},o(w){W(v),w&&(y||(y=$(e,Ee,{duration:400},!1)),y.run(0)),E=!1},d(w){w&&S(e),ve(g,w),v&&v.d(),w&&y&&y.end(),T=!1,Ce(d)}}}function Mt(t){let e,l,n=t[1]+1+"",r,u,s=t[5][t[0]]+"",f,p,o,c,h,m,b,y,E,T,d,i,a,g,v,w,C=t[6](t[2]),k=[];for(let D=0;D<C.length;D+=1)k[D]=ft(it(t,C,D));const J=D=>W(k[D],1,1,()=>{k[D]=null});return{c(){e=L("fieldset"),l=L("div"),r=F(n),u=F(`.
        `),f=F(s),p=O(),o=L("div"),c=L("button"),h=F("x"),m=O(),b=L("button"),y=F("+"),E=O(),T=L("button"),d=F("-"),i=O();for(let D=0;D<k.length;D+=1)k[D].c();this.h()},l(D){e=M(D,"FIELDSET",{class:!0});var U=B(e);l=M(U,"DIV",{class:!0});var Y=B(l);r=P(Y,n),u=P(Y,`.
        `),f=P(Y,s),Y.forEach(S),p=V(U),o=M(U,"DIV",{class:!0});var q=B(o);c=M(q,"BUTTON",{class:!0});var x=B(c);h=P(x,"x"),x.forEach(S),m=V(q),b=M(q,"BUTTON",{class:!0});var X=B(b);y=P(X,"+"),X.forEach(S),E=V(q),T=M(q,"BUTTON",{class:!0});var K=B(T);d=P(K,"-"),K.forEach(S),q.forEach(S),i=V(U);for(let Q=0;Q<k.length;Q+=1)k[Q].l(U);U.forEach(S),this.h()},h(){N(l,"class","naming svelte-187mbnt"),N(c,"class","svelte-187mbnt"),N(b,"class","svelte-187mbnt"),N(T,"class","svelte-187mbnt"),N(o,"class","unit-buttons svelte-187mbnt"),N(e,"class","unit svelte-187mbnt")},m(D,U){R(D,e,U),_(e,l),_(l,r),_(l,u),_(l,f),_(e,p),_(e,o),_(o,c),_(c,h),_(o,m),_(o,b),_(b,y),_(o,E),_(o,T),_(T,d),_(e,i);for(let Y=0;Y<k.length;Y+=1)k[Y]&&k[Y].m(e,null);g=!0,v||(w=[G(c,"click",t[9]),G(b,"click",t[10](1)),G(T,"click",t[10](-1))],v=!0)},p(D,[U]){if((!g||U&2)&&n!==(n=D[1]+1+"")&&ie(r,n),(!g||U&33)&&s!==(s=D[5][D[0]]+"")&&ie(f,s),U&477){C=D[6](D[2]);let Y;for(Y=0;Y<C.length;Y+=1){const q=it(D,C,Y);k[Y]?(k[Y].p(q,U),z(k[Y],1)):(k[Y]=ft(q),k[Y].c(),z(k[Y],1),k[Y].m(e,null))}for(ce(),Y=C.length;Y<k.length;Y+=1)J(Y);fe()}},i(D){if(!g){for(let U=0;U<C.length;U+=1)z(k[U]);Se(()=>{g&&(a||(a=$(e,Ee,{duration:400},!0)),a.run(1))}),g=!0}},o(D){k=k.filter(Boolean);for(let U=0;U<k.length;U+=1)W(k[U]);a||(a=$(e,Ee,{duration:400},!1)),a.run(0),g=!1},d(D){D&&S(e),ve(k,D),D&&a&&a.end(),v=!1,Ce(w)}}}const ht=39,mt=14;function Dt(t,e,l){let n,r,u;Z(t,ne,i=>l(13,n=i)),Z(t,_e,i=>l(14,r=i)),Z(t,ke,i=>l(5,u=i));let{uid:s=1}=e,{priority:f=0}=e,p=1,o=[],c=Array(5).fill(!1),h=[];const m=i=>Array(i).fill(0).map((g,v)=>g+v),b=i=>a=>{if(l(11,h=h.filter(v=>v.cast!==i)),a.target.value==="-1"){l(3,o=[...o,i]);return}if(a.target.value===""){l(3,o=o.filter(v=>v!==i)),l(11,h),l(4,c);return}l(3,o=o.filter(v=>v!==i));const g=a.target.value.split(",").map(v=>Number(v));h.push(...g.map(v=>({frame:v+i*(mt+ht),unit:f,cast:i,tag:c[i]}))),l(11,h),l(4,c)},y=i=>a=>{const g=a.target.value.trim();let v=[];if(g.includes("-")){let w=0;for(const C of g.split("-").map(k=>Number(k)))w+=C,v.push(w)}else v=g.split(",").map(w=>Number(w));if(l(11,h=h.filter(w=>w.cast!==i)),v.some(w=>isNaN(w)||w>6e3)||v.length>150){l(11,h),l(4,c);return}l(11,h=h.filter(w=>w.cast!==i)),h.push(...v.map(w=>({frame:w+i*(mt+ht),unit:f,cast:i,tag:c[i]}))),l(11,h),l(4,c)};function E(){ue(_e,r[s]=[],r),ue(ne,n[s]=0,n),ye.update(i=>i.filter(a=>a!==s))}function T(i){return()=>{let v=Math.max(1,Math.min(5,p+i));i<0&&l(11,h=h.filter(w=>w.cast<v)),l(2,p=v)}}function d(i){c[i]=this.checked,l(4,c)}return t.$$set=i=>{"uid"in i&&l(0,s=i.uid),"priority"in i&&l(1,f=i.priority)},t.$$.update=()=>{if(t.$$.dirty&12&&l(3,o=o.filter(i=>i<p)),t.$$.dirty&2064){for(const i of h)i.tag=c[i.cast];l(11,h),l(4,c)}t.$$.dirty&2050&&h.map(i=>{i.unit=f}),t.$$.dirty&2050&&_e.update(i=>(i[f]=h,i))},[s,f,p,o,c,u,m,b,y,E,T,h,d]}class Bt extends we{constructor(e){super(),Te(this,e,Dt,Mt,Ne,{uid:0,priority:1})}}function Ut(t,e){let l,n=0,r=0;const u=p=>{const o=p.clientX,c=p.clientY;n=o,r=c,l=setTimeout(()=>{const h=Math.abs(o-n)<5,m=Math.abs(c-r)<5;h&&m&&t.dispatchEvent(new CustomEvent("longpress"))},e)},s=p=>{n=p.clientX,r=p.clientY},f=()=>{clearTimeout(l)};return t.addEventListener("pointerdown",u),t.addEventListener("pointermove",s),t.addEventListener("pointerup",f),{update(p){e=p},destroy(){t.removeEventListener("pointerdown",u),t.removeEventListener("pointermove",s),t.removeEventListener("pointerup",f)}}}function At(t,e=!1){let l=!1,n=0,r=0;const u=o=>{n=o.pageY,l=!0,t.dispatchEvent(new CustomEvent("moveStart"))},s=o=>{l&&e&&(o.preventDefault(),r=o.pageY-n,n=o.pageY,t.dispatchEvent(new CustomEvent("moving",{detail:{value:r}})))},f=o=>{l&&(n=0,l=!1,t.dispatchEvent(new CustomEvent("moveEnd")))},p=o=>{e&&o.preventDefault()};return t.addEventListener("pointerdown",u,{capture:!1}),t.addEventListener("pointermove",s,{capture:!1}),t.addEventListener("pointerup",f,{capture:!1}),t.addEventListener("touchstart",p),{update(o){e=o},destroy(){t.removeEventListener("pointerdown",u),t.removeEventListener("pointermove",s),t.removeEventListener("pointerup",s),t.removeEventListener("touchstart",p)}}}function Yt(t){let e,l,n,r;return{c(){e=L("div"),this.h()},l(u){e=M(u,"DIV",{class:!0});var s=B(e);s.forEach(S),this.h()},h(){N(e,"class","top svelte-10dd8lh"),Oe(e,"shadow",t[1])},m(u,s){R(u,e,s),t[12](e),n||(r=[st(Ut.call(null,e,1600)),st(l=At.call(null,e,t[1])),G(e,"longpress",t[11]),G(e,"moving",t[2]),G(e,"moveEnd",t[3]),G(e,"moveStart",t[4])],n=!0)},p(u,[s]){l&&Ie(l.update)&&s&2&&l.update.call(null,u[1]),s&2&&Oe(e,"shadow",u[1])},i:Pe,o:Pe,d(u){u&&S(e),t[12](null),n=!1,Ce(r)}}}function Ft(t,e){t&&(t.style.minHeight=`${e}px`)}function Pt(t,e,l){let{frames:n}=e,{delay:r=0}=e,{topDiff:u=0}=e,{breaks:s=[]}=e,{frameSize:f=7}=e,p=0,o=r,c=!1,h=[],m;function b(i){const a=i.detail.value;a!==void 0&&(p+=a,l(5,r=Math.max(0,o+Math.round(p/f))))}function y(i){o=r,p=0}function E(i){o=r,p=0}const T=()=>{l(1,c=!c)};function d(i){Ve[i?"unshift":"push"](()=>{m=i,l(0,m),l(5,r),l(9,f)})}return t.$$set=i=>{"frames"in i&&l(6,n=i.frames),"delay"in i&&l(5,r=i.delay),"topDiff"in i&&l(7,u=i.topDiff),"breaks"in i&&l(8,s=i.breaks),"frameSize"in i&&l(9,f=i.frameSize)},t.$$.update=()=>{if(t.$$.dirty&545&&m&&l(0,m.style.paddingTop=`${r*f}px`,m),t.$$.dirty&705&&m){const i=[];let a=[],g=0;for(const v of n){const w=document.createElement("div");if(w.style.flex="1",w.style.height=`${f}px`,w.classList.add(`c-${v.cast}`),i[v.frame]===void 0){const C=document.createElement("div");C.classList.add("mini-container"),C.style.top=`${(v.frame-u-g)*f}px`,C.appendChild(w),i[v.frame]=C,g++}else i[v.frame].appendChild(w)}a=i.filter(v=>v!==void 0),m==null||m.replaceChildren(...a),n.length>0&&Ft(m,f*(n[n.length-1].frame-u+2)),l(10,h=[])}if(t.$$.dirty&1281&&m){if(m.children.length>0){for(const i of h)m.children[i[0]].children[i[1]].classList.remove("break");for(const i of s)m.children[i[0]].children[i[1]].classList.add("break")}l(10,h=s.slice())}},[m,c,b,y,E,r,n,u,s,f,h,T,d]}class Ot extends we{constructor(e){super(),Te(this,e,Pt,Yt,Ne,{frames:6,delay:5,topDiff:7,breaks:8,frameSize:9})}}function Vt(t){const e=t-1;return e*e*e+1}function pt(t,{delay:e=0,duration:l=400,easing:n=Vt,axis:r="y"}={}){const u=getComputedStyle(t),s=+u.opacity,f=r==="y"?"height":"width",p=parseFloat(u[f]),o=r==="y"?["top","bottom"]:["left","right"],c=o.map(d=>`${d[0].toUpperCase()}${d.slice(1)}`),h=parseFloat(u[`padding${c[0]}`]),m=parseFloat(u[`padding${c[1]}`]),b=parseFloat(u[`margin${c[0]}`]),y=parseFloat(u[`margin${c[1]}`]),E=parseFloat(u[`border${c[0]}Width`]),T=parseFloat(u[`border${c[1]}Width`]);return{delay:e,duration:l,easing:n,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*s};${f}: ${d*p}px;padding-${o[0]}: ${d*h}px;padding-${o[1]}: ${d*m}px;margin-${o[0]}: ${d*b}px;margin-${o[1]}: ${d*y}px;border-${o[0]}-width: ${d*E}px;border-${o[1]}-width: ${d*T}px;`}}function zt(t,e,l,n){let r=Array(e).fill(0),u=Array(e).fill(0),s=Array(e);for(let m=0;m<e;m++)s[m]=[];let f=0,p=0,o=0;const c=(m,b)=>{let y=0;for(;r[m]+y<t[m].length;){const E=r[m]+y;if(t[m][E].frame+l[m]-n[m]!=b)break;y++}return y},h=()=>{let m=Number.MAX_SAFE_INTEGER,b=0;for(let y=e-1;y>=0;y--)if(r[y]<t[y].length){const E=t[y][r[y]].frame+l[y]-n[y];E<=m&&(b=y,m=E)}return b};for(p=-1,o=Math.min(...l);r.some((m,b)=>m<t[b].length);){f=h();const m=t[f][r[f]],b=m.frame+l[f]-n[f];b-o>20&&s[f].push([u[f],0,"gap more than 20 frames"]),f===p&&!m.tag&&s[f].push([u[f],0,"same unit in a row"]);let y={},E=1,T=1;for(let d=0;d<e;d++){const i=c(d,b);if(i!==0){if(y[`${i}`]?y[`${i}`].unshift(d):y[`${i}`]=[d],r[d]+=i,u[d]++,i>=T){E=T,T=i;continue}i>E&&(E=i)}}if(f=y[`${T}`][0],T>E)for(let d=E;d<T;d++)t[f][r[f]+d-T].tag||s[f].push([u[f]-1,d,"packed frame without pair"]);o=b,p=f}return s}function dt(t,e,l){const n=t.slice();return n[17]=e[l],n}function _t(t,e,l){const n=t.slice();return n[20]=e[l],n[21]=e,n[17]=l,n}function vt(t,e,l){const n=t.slice();return n[20]=e[l],n[17]=l,n}function gt(t,e){let l,n,r=`${e[8][e[20]]}`,u,s,f,p,o,c,h,m,b;return{key:t,first:null,c(){l=L("div"),n=L("label"),u=F(r),f=O(),p=L("input"),h=O(),this.h()},l(y){l=M(y,"DIV",{class:!0});var E=B(l);n=M(E,"LABEL",{for:!0,class:!0});var T=B(n);u=P(T,r),T.forEach(S),f=V(E),p=M(E,"INPUT",{type:!0,min:!0,id:!0,class:!0}),h=V(E),E.forEach(S),this.h()},h(){N(n,"for",s=`prio-${e[17]}`),N(n,"class","svelte-1p83edr"),N(p,"type","number"),p.value=o=e[6][e[20]],N(p,"min","0"),N(p,"id",c=`prio-${e[17]}`),N(p,"class","svelte-1p83edr"),N(l,"class","control svelte-1p83edr"),this.first=l},m(y,E){R(y,l,E),_(l,n),_(n,u),_(l,f),_(l,p),_(l,h),m||(b=G(p,"input",function(){Ie(e[10](e[20]))&&e[10](e[20]).apply(this,arguments)}),m=!0)},p(y,E){e=y,E&288&&r!==(r=`${e[8][e[20]]}`)&&ie(u,r),E&32&&s!==(s=`prio-${e[17]}`)&&N(n,"for",s),E&96&&o!==(o=e[6][e[20]])&&p.value!==o&&(p.value=o),E&32&&c!==(c=`prio-${e[17]}`)&&N(p,"id",c)},d(y){y&&S(l),m=!1,b()}}}function bt(t){let e,l,n,r,u,s=t[9](t[7])===1?"1 break":`${t[9](t[7])} breaks`,f,p,o,c,h,m=t[5],b=[];for(let d=0;d<m.length;d+=1)b[d]=yt(_t(t,m,d));const y=d=>W(b[d],1,1,()=>{b[d]=null});let E=t[4],T=[];for(let d=0;d<E.length;d+=1)T[d]=kt(dt(t,E,d));return{c(){e=L("div");for(let d=0;d<b.length;d+=1)b[d].c();l=O(),n=L("div"),r=L("span"),u=F("There's "),f=F(s),p=F("."),o=O();for(let d=0;d<T.length;d+=1)T[d].c();this.h()},l(d){e=M(d,"DIV",{class:!0,style:!0});var i=B(e);for(let v=0;v<b.length;v+=1)b[v].l(i);l=V(i),n=M(i,"DIV",{class:!0});var a=B(n);r=M(a,"SPAN",{});var g=B(r);u=P(g,"There's "),f=P(g,s),p=P(g,"."),g.forEach(S),o=V(a);for(let v=0;v<T.length;v+=1)T[v].l(a);a.forEach(S),i.forEach(S),this.h()},h(){N(n,"class","infobar svelte-1p83edr"),Oe(n,"expand",Ht),N(e,"class","container-visual svelte-1p83edr"),be(e,"grid-template-columns","repeat("+t[5].length+",1fr) 4.5%")},m(d,i){R(d,e,i);for(let a=0;a<b.length;a+=1)b[a]&&b[a].m(e,null);_(e,l),_(e,n),_(n,r),_(r,u),_(r,f),_(r,p),_(n,o);for(let a=0;a<T.length;a+=1)T[a]&&T[a].m(n,null);t[13](e),h=!0},p(d,i){if(i&227){m=d[5];let a;for(a=0;a<m.length;a+=1){const g=_t(d,m,a);b[a]?(b[a].p(g,i),z(b[a],1)):(b[a]=yt(g),b[a].c(),z(b[a],1),b[a].m(e,l))}for(ce(),a=m.length;a<b.length;a+=1)y(a);fe()}if((!h||i&128)&&s!==(s=d[9](d[7])===1?"1 break":`${d[9](d[7])} breaks`)&&ie(f,s),i&118){E=d[4];let a;for(a=0;a<E.length;a+=1){const g=dt(d,E,a);T[a]?T[a].p(g,i):(T[a]=kt(g),T[a].c(),T[a].m(n,null))}for(;a<T.length;a+=1)T[a].d(1);T.length=E.length}(!h||i&32)&&be(e,"grid-template-columns","repeat("+d[5].length+",1fr) 4.5%")},i(d){if(!h){for(let i=0;i<m.length;i+=1)z(b[i]);Se(()=>{h&&(c||(c=$(e,pt,{axis:"x"},!0)),c.run(1))}),h=!0}},o(d){b=b.filter(Boolean);for(let i=0;i<b.length;i+=1)W(b[i]);c||(c=$(e,pt,{axis:"x"},!1)),c.run(0),h=!1},d(d){d&&S(e),ve(b,d),ve(T,d),t[13](null),d&&c&&c.end()}}}function yt(t){let e,l,n;function r(s){t[12](s,t[20])}let u={frameSize:Nt,frames:t[0][t[17]],topDiff:t[1][t[17]],breaks:t[7][t[17]]};return t[6][t[20]]!==void 0&&(u.delay=t[6][t[20]]),e=new Ot({props:u}),Ve.push(()=>Ct(e,"delay",r)),{c(){ze(e.$$.fragment)},l(s){Xe(e.$$.fragment,s)},m(s,f){He(e,s,f),n=!0},p(s,f){t=s;const p={};f&1&&(p.frames=t[0][t[17]]),f&2&&(p.topDiff=t[1][t[17]]),f&128&&(p.breaks=t[7][t[17]]),!l&&f&96&&(l=!0,p.delay=t[6][t[20]],It(()=>l=!1)),e.$set(p)},i(s){n||(z(e.$$.fragment,s),n=!0)},o(s){W(e.$$.fragment,s),n=!1},d(s){Re(e,s)}}}function kt(t){let e,l,n=t[17]+1+"",r,u,s=t[6][t[5][t[17]]]-t[1][t[17]]+t[2]+"",f,p;return{c(){e=L("span"),l=F("p"),r=F(n),u=F(":"),f=F(s),p=O(),this.h()},l(o){e=M(o,"SPAN",{class:!0});var c=B(e);l=P(c,"p"),r=P(c,n),u=P(c,":"),f=P(c,s),p=V(c),c.forEach(S),this.h()},h(){N(e,"class","result svelte-1p83edr")},m(o,c){R(o,e,c),_(e,l),_(e,r),_(e,u),_(e,f),_(e,p)},p(o,c){c&16&&n!==(n=o[17]+1+"")&&ie(r,n),c&118&&s!==(s=o[6][o[5][o[17]]]-o[1][o[17]]+o[2]+"")&&ie(f,s)},d(o){o&&S(e)}}}function Xt(t){let e,l=[],n=new Map,r,u,s,f=t[5];const p=c=>c[20];for(let c=0;c<f.length;c+=1){let h=vt(t,f,c),m=p(h);n.set(m,l[c]=gt(m,h))}let o=t[5].length>0&&bt(t);return{c(){e=L("div");for(let c=0;c<l.length;c+=1)l[c].c();r=O(),o&&o.c(),u=ge(),this.h()},l(c){e=M(c,"DIV",{class:!0,style:!0,id:!0});var h=B(e);for(let m=0;m<l.length;m+=1)l[m].l(h);h.forEach(S),r=V(c),o&&o.l(c),u=ge(),this.h()},h(){N(e,"class","container-controls svelte-1p83edr"),be(e,"grid-template-columns","repeat("+t[5].length+",1fr) 4.5%"),N(e,"id","container-controls")},m(c,h){R(c,e,h);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);R(c,r,h),o&&o.m(c,h),R(c,u,h),s=!0},p(c,[h]){h&1376&&(f=c[5],l=Tt(l,h,p,1,c,f,n,e,St,gt,null,vt)),(!s||h&32)&&be(e,"grid-template-columns","repeat("+c[5].length+",1fr) 4.5%"),c[5].length>0?o?(o.p(c,h),h&32&&z(o,1)):(o=bt(c),o.c(),z(o,1),o.m(u.parentNode,u)):o&&(ce(),W(o,1,1,()=>{o=null}),fe())},i(c){s||(z(o),s=!0)},o(c){W(o),s=!1},d(c){c&&S(e);for(let h=0;h<l.length;h+=1)l[h].d();c&&S(r),o&&o.d(c),c&&S(u)}}}const Nt=9;let Ht=!1;function Rt(t,e,l){let n,r,u,s,f;Z(t,ye,a=>l(5,r=a)),Z(t,ne,a=>l(6,u=a)),Z(t,_e,a=>l(11,s=a)),Z(t,ke,a=>l(8,f=a));let p=Array(6).fill([]),o=Array(6).fill(0),c=0,h,m=[];const b=a=>{let g=0;for(const v of a)g+=v.length;return g},y=(a,g)=>a.frame!==g.frame?a.frame-g.frame:a.cast!==g.cast?a.cast-g.cast:0,E=a=>g=>{if(g.preventDefault(),g.target){const v=g.target;v.value=`${Math.max(0,Number(v.value))}`,ue(ne,u[a]=Number(v.value),u)}else return},T=(a,g)=>(v,w)=>{const C=r[v],k=r[w];return a[C]+g[w]-a[k]-g[v]};function d(a,g){t.$$.not_equal(u[g],a)&&(u[g]=a,ne.set(u))}function i(a){Ve[a?"unshift":"push"](()=>{h=a,l(3,h),l(5,r)})}return t.$$.update=()=>{if(t.$$.dirty&2049)for(let a=0;a<6;a++)s[a]&&(l(0,p[a]=s[a].slice().sort(y),p),p[a][0]!==void 0?l(1,o[a]=p[a][0].frame,o):l(1,o[a]=0,o));if(t.$$.dirty&102){l(2,c=0);for(let a=0;a<r.length;a++){const g=o[a]-u[r[a]];c<g&&l(2,c=g)}}t.$$.dirty&99&&l(7,n=zt(p,r.length,u,o)),t.$$.dirty&114&&(l(4,m=Array(r.length).fill(0).map((a,g)=>g)),m.sort(T(u,o)),m.length>1&&m[0]),t.$$.dirty&40&&h&&l(3,h.style.backgroundSize=`${(100-4.5)/r.length}% ${Nt}px`,h)},[p,o,c,h,m,r,u,n,f,b,E,s,d,i]}class qt extends we{constructor(e){super(),Te(this,e,Rt,Xt,Ne,{})}}function Et(t,e,l){const n=t.slice();return n[8]=e[l],n}function wt(t,e){let l,n,r;function u(...s){return e[5](e[8],...s)}return n=new Bt({props:{uid:e[8],priority:e[1].findIndex(u)}}),{key:t,first:null,c(){l=ge(),ze(n.$$.fragment),this.h()},l(s){l=ge(),Xe(n.$$.fragment,s),this.h()},h(){this.first=l},m(s,f){R(s,l,f),He(n,s,f),r=!0},p(s,f){e=s;const p={};f&2&&(p.uid=e[8]),f&2&&(p.priority=e[1].findIndex(u)),n.$set(p)},i(s){r||(z(n.$$.fragment,s),r=!0)},o(s){W(n.$$.fragment,s),r=!1},d(s){s&&S(l),Re(n,s)}}}function Gt(t){let e,l,n,r,u,s,f,p,o,c,h,m,b,y,E,T,d,i,a,g,v,w,C,k,J,D,U,Y,q,x,X,K,Q,Me,De,ee,Be,Ue,te,H=[],qe=new Map,Ae,le,he,se,Ye,Ge,oe=t[1];const We=A=>A[8];for(let A=0;A<oe.length;A+=1){let I=Et(t,oe,A),j=We(I);qe.set(j,H[A]=wt(j,I))}return le=new qt({}),{c(){e=L("div"),l=L("button"),n=F("X"),r=O(),u=L("p"),s=F(`You can add up to 6 units. 
        You can remove a unit by clicking the [X] button on the unit card.`),f=O(),p=L("p"),o=F(`You can add up to 5 casts for each unit using the [+] button 
        and remove a cast at the end with the [-] button. 
        Ticking the checkbox makes an ability be TAG, i.e. allow self-chaining.`),c=O(),h=L("p"),m=F(`You can also add an ability with Custom frames. 
        There are 2 acceptables formats. Comma (,) and dash(-) seperated. e.g.`),b=O(),y=L("ul"),E=L("li"),T=F('BS: "42,48,54,60,66,72,78,84,90"'),d=O(),i=L("li"),a=F('BS: "42-6-6-6-6-6-6-6-6"'),g=O(),v=L("p"),w=F(`The selected skills can be seen at the bottom, 
        each cast is represented with a different colour.
        Breaks get red-ish stripes on them. 
        The unit order on the grid is from left to right, 
        like this 1→2→3 etc based on priority.`),C=O(),k=L("p"),J=F(`You can press hold on a unit's frames on the grid 
        to unlock them and make them movable. 
        If you long press again they lock.`),D=O(),U=L("p"),Y=F(`There's a vertical (sorry) infobar that displays
        how many breaks there are and each unit is fired off
        in absolute frames based on priority.`),x=O(),X=L("div"),K=L("div"),Q=L("button"),Me=F("How to use"),De=O(),ee=L("button"),Be=F("Add a unit"),Ue=O(),te=L("div");for(let A=0;A<H.length;A+=1)H[A].c();Ae=O(),ze(le.$$.fragment),this.h()},l(A){e=M(A,"DIV",{class:!0});var I=B(e);l=M(I,"BUTTON",{class:!0});var j=B(l);n=P(j,"X"),j.forEach(S),r=V(I),u=M(I,"P",{class:!0});var Je=B(u);s=P(Je,`You can add up to 6 units. 
        You can remove a unit by clicking the [X] button on the unit card.`),Je.forEach(S),f=V(I),p=M(I,"P",{class:!0});var Ke=B(p);o=P(Ke,`You can add up to 5 casts for each unit using the [+] button 
        and remove a cast at the end with the [-] button. 
        Ticking the checkbox makes an ability be TAG, i.e. allow self-chaining.`),Ke.forEach(S),c=V(I),h=M(I,"P",{class:!0});var Qe=B(h);m=P(Qe,`You can also add an ability with Custom frames. 
        There are 2 acceptables formats. Comma (,) and dash(-) seperated. e.g.`),Qe.forEach(S),b=V(I),y=M(I,"UL",{});var me=B(y);E=M(me,"LI",{});var je=B(E);T=P(je,'BS: "42,48,54,60,66,72,78,84,90"'),je.forEach(S),d=V(me),i=M(me,"LI",{});var Ze=B(i);a=P(Ze,'BS: "42-6-6-6-6-6-6-6-6"'),Ze.forEach(S),me.forEach(S),g=V(I),v=M(I,"P",{class:!0});var $e=B(v);w=P($e,`The selected skills can be seen at the bottom, 
        each cast is represented with a different colour.
        Breaks get red-ish stripes on them. 
        The unit order on the grid is from left to right, 
        like this 1→2→3 etc based on priority.`),$e.forEach(S),C=V(I),k=M(I,"P",{class:!0});var xe=B(k);J=P(xe,`You can press hold on a unit's frames on the grid 
        to unlock them and make them movable. 
        If you long press again they lock.`),xe.forEach(S),D=V(I),U=M(I,"P",{class:!0});var et=B(U);Y=P(et,`There's a vertical (sorry) infobar that displays
        how many breaks there are and each unit is fired off
        in absolute frames based on priority.`),et.forEach(S),I.forEach(S),x=V(A),X=M(A,"DIV",{class:!0});var re=B(X);K=M(re,"DIV",{class:!0});var pe=B(K);Q=M(pe,"BUTTON",{class:!0});var tt=B(Q);Me=P(tt,"How to use"),tt.forEach(S),De=V(pe),ee=M(pe,"BUTTON",{class:!0});var lt=B(ee);Be=P(lt,"Add a unit"),lt.forEach(S),pe.forEach(S),Ue=V(re),te=M(re,"DIV",{class:!0});var nt=B(te);for(let Fe=0;Fe<H.length;Fe+=1)H[Fe].l(nt);nt.forEach(S),Ae=V(re),Xe(le.$$.fragment,re),re.forEach(S),this.h()},h(){N(l,"class","exit svelte-11up8a5"),N(u,"class","svelte-11up8a5"),N(p,"class","svelte-11up8a5"),N(h,"class","svelte-11up8a5"),N(v,"class","svelte-11up8a5"),N(k,"class","svelte-11up8a5"),N(U,"class","svelte-11up8a5"),N(e,"class",q=de(`help ${t[0]?"visible":""}`)+" svelte-11up8a5"),N(Q,"class","svelte-11up8a5"),N(ee,"class","svelte-11up8a5"),N(K,"class","flex-h svelte-11up8a5"),N(te,"class","unit-flex svelte-11up8a5"),N(X,"class",he=de(`wrapper ${t[0]?"unclick":""}`)+" svelte-11up8a5")},m(A,I){R(A,e,I),_(e,l),_(l,n),_(e,r),_(e,u),_(u,s),_(e,f),_(e,p),_(p,o),_(e,c),_(e,h),_(h,m),_(e,b),_(e,y),_(y,E),_(E,T),_(y,d),_(y,i),_(i,a),_(e,g),_(e,v),_(v,w),_(e,C),_(e,k),_(k,J),_(e,D),_(e,U),_(U,Y),R(A,x,I),R(A,X,I),_(X,K),_(K,Q),_(Q,Me),_(K,De),_(K,ee),_(ee,Be),_(X,Ue),_(X,te);for(let j=0;j<H.length;j+=1)H[j]&&H[j].m(te,null);_(X,Ae),He(le,X,null),se=!0,Ye||(Ge=[G(l,"click",t[3]),G(Q,"click",t[4]),G(ee,"click",t[2])],Ye=!0)},p(A,[I]){(!se||I&1&&q!==(q=de(`help ${A[0]?"visible":""}`)+" svelte-11up8a5"))&&N(e,"class",q),I&2&&(oe=A[1],ce(),H=Tt(H,I,We,1,A,oe,qe,te,Lt,wt,null,Et),fe()),(!se||I&1&&he!==(he=de(`wrapper ${A[0]?"unclick":""}`)+" svelte-11up8a5"))&&N(X,"class",he)},i(A){if(!se){for(let I=0;I<oe.length;I+=1)z(H[I]);z(le.$$.fragment,A),se=!0}},o(A){for(let I=0;I<H.length;I+=1)W(H[I]);W(le.$$.fragment,A),se=!1},d(A){A&&S(e),A&&S(x),A&&S(X);for(let I=0;I<H.length;I+=1)H[I].d();Re(le),Ye=!1,Ce(Ge)}}}function Wt(t,e,l){let n,r,u;Z(t,ne,h=>l(6,n=h)),Z(t,ke,h=>l(7,r=h)),Z(t,ye,h=>l(1,u=h));function s(){if(u.length>=6)return;const m=[0,1,2,3,4,5].find(b=>!u.includes(b));m!==void 0&&(ye.update(b=>[...b,m]),ue(ke,r[m]=`Unit ${m+1}`,r),ue(ne,n[m]=0,n))}let f=!1;return[f,u,s,()=>{l(0,f=!f)},()=>{l(0,f=!f)},(h,m)=>m===h]}class Qt extends we{constructor(e){super(),Te(this,e,Wt,Gt,Ne,{})}}export{Qt as component};
