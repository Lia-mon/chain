import{S as oe,i as ue,s as ce,k as D,q as A,a as P,l as L,m as M,r as Y,h as S,c as O,n as N,b as z,G as g,J as V,u as $,g as j,v as x,f as ee,K as fe,L as R,d as H,M as le,N as te,I as q,O as he,H as se,P as de,Q as Se,w as ve,e as re,R as Ke,T as $e,U as Ce,p as Ie,V as xe,y as ge,z as be,A as ye,W as et,B as ke,X as pe,Y as tt,Z as nt}from"../chunks/index.20faa67b.js";import{w as me}from"../chunks/index.2cf65d35.js";const ae=me([0,1]),Qe=me(Array(6)),J=me(Array(6).fill(0)),_e=me(["Unit 1","Unit 2"]);function W(t,e,n){const l=[];for(let o=0;o<n;o++)l.push(t+e*o);return l}const De=[{name:"BS",value:W(42,6,9)},{name:"AMoE",value:W(70,6,8)},{name:"CWA",value:W(42,20,8)},{name:"Extreme Nova",value:W(60,5,30)},{name:"SR",value:W(110,10,10)},{name:"AR",value:W(45,4,30)},{name:"3 x BS (var 2)",value:[42,48,54,60,66,72,78,84,90,95,101,107,113,119,125,131,137,143,148,154,160,166,172,178,184,190,196]},{name:"3 x AMoE",value:[70,76,82,88,94,100,106,112,123,129,135,141,147,153,159,165,176,182,188,194,200,206,212,218]},{name:"old 3 x BS (var 1)",value:[42,48,54,60,66,72,78,84,90,96,102,108,114,120,126,132,138,144,150,156,162,168,174,180,186,192,198]},{name:"Mystic Breath",value:[42,50,58,66,74,82,90,98,106,114,122,130,138,146,154,162]}];function ie(t,{delay:e=0,duration:n=400}){const l=getComputedStyle(t).height,o=Number(l.match(/\d+/)),c=getComputedStyle(t).marginTop,s=Number(c.match(/\d+/));let u=1;return{delay:e,duration:n,css:(m,i)=>`height: ${m*o}px; 
                        margin-top : ${m*s}px;`+`opacity : ${m*u}`}}function Le(t,{delay:e=0,duration:n=400}){const l=getComputedStyle(t).width,o=Number(l.match(/\d+/)),c=getComputedStyle(t).marginLeft;Number(c.match(/\d+/));const s=getComputedStyle(t).marginRight;return Number(s.match(/\d+/)),{delay:e,duration:n,css:(u,m)=>`max-width: ${u*o}px;`}}function Me(t,e,n){const l=t.slice();return l[13]=e[n],l[14]=e,l[15]=n,l}function Be(t,e,n){const l=t.slice();return l[16]=e[n],l}function Ue(t){let e,n=t[16].name+"",l;return{c(){e=D("option"),l=A(n),this.h()},l(o){e=L(o,"OPTION",{class:!0});var c=M(e);l=Y(c,n),c.forEach(S),this.h()},h(){e.__value=t[16].value,e.value=e.__value,N(e,"class","svelte-187mbnt")},m(o,c){z(o,e,c),g(e,l)},p:se,d(o){o&&S(e)}}}function Ae(t){let e,n,l,o,c;return{c(){e=D("input"),this.h()},l(s){e=L(s,"INPUT",{type:!0,inputmode:!0,placeholder:!0,class:!0}),this.h()},h(){N(e,"type","text"),N(e,"inputmode","numeric"),N(e,"placeholder",""),N(e,"class","frame-input svelte-187mbnt")},m(s,u){z(s,e,u),l=!0,o||(c=V(e,"change",function(){he(t[8](t[13]))&&t[8](t[13]).apply(this,arguments)}),o=!0)},p(s,u){t=s},i(s){l||(s&&fe(()=>{l&&(n||(n=R(e,Le,{duration:200},!0)),n.run(1))}),l=!0)},o(s){s&&(n||(n=R(e,Le,{duration:200},!1)),n.run(0)),l=!1},d(s){s&&S(e),s&&n&&n.end(),o=!1,c()}}}function Ye(t){let e,n,l,o,c,s,u,m,i,f,p,_=t[3].includes(t[13]),b,E,T,d,r;function a(){t[12].call(n,t[13])}let h=De,k=[];for(let y=0;y<h.length;y+=1)k[y]=Ue(Be(t,h,y));let v=_&&Ae(t);return{c(){e=D("div"),n=D("input"),l=P(),o=D("select"),c=D("option"),s=A("Empty");for(let y=0;y<k.length;y+=1)k[y].c();u=D("option"),m=A("Custom"),p=P(),v&&v.c(),b=P(),this.h()},l(y){e=L(y,"DIV",{class:!0});var C=M(e);n=L(C,"INPUT",{type:!0,class:!0}),l=O(C),o=L(C,"SELECT",{name:!0,id:!0,class:!0});var w=M(o);c=L(w,"OPTION",{class:!0});var X=M(c);s=Y(X,"Empty"),X.forEach(S);for(let B=0;B<k.length;B+=1)k[B].l(w);u=L(w,"OPTION",{class:!0});var I=M(u);m=Y(I,"Custom"),I.forEach(S),w.forEach(S),p=O(C),v&&v.l(C),b=O(C),C.forEach(S),this.h()},h(){N(n,"type","checkbox"),N(n,"class","checky svelte-187mbnt"),c.__value="",c.value=c.__value,N(c,"class","svelte-187mbnt"),u.__value="-1",u.value=u.__value,N(u,"class","svelte-187mbnt"),N(o,"name",i=`${t[0]}-cast${t[13]}`),N(o,"id",f=`${t[0]}-cast${t[13]}`),N(o,"class","selection-menu svelte-187mbnt"),N(e,"class","cast-selection svelte-187mbnt")},m(y,C){z(y,e,C),g(e,n),n.checked=t[4][t[13]],g(e,l),g(e,o),g(o,c),g(c,s);for(let w=0;w<k.length;w+=1)k[w]&&k[w].m(o,null);g(o,u),g(u,m),g(e,p),v&&v.m(e,null),g(e,b),T=!0,d||(r=[V(n,"change",a),V(o,"change",function(){he(t[7](t[13]))&&t[7](t[13]).apply(this,arguments)})],d=!0)},p(y,C){if(t=y,C&84&&(n.checked=t[4][t[13]]),C&0){h=De;let w;for(w=0;w<h.length;w+=1){const X=Be(t,h,w);k[w]?k[w].p(X,C):(k[w]=Ue(X),k[w].c(),k[w].m(o,u))}for(;w<k.length;w+=1)k[w].d(1);k.length=h.length}(!T||C&5&&i!==(i=`${t[0]}-cast${t[13]}`))&&N(o,"name",i),(!T||C&5&&f!==(f=`${t[0]}-cast${t[13]}`))&&N(o,"id",f),C&12&&(_=t[3].includes(t[13])),_?v?(v.p(t,C),C&12&&j(v,1)):(v=Ae(t),v.c(),j(v,1),v.m(e,b)):v&&(x(),H(v,1,1,()=>{v=null}),ee())},i(y){T||(j(v),y&&fe(()=>{T&&(E||(E=R(e,ie,{duration:400},!0)),E.run(1))}),T=!0)},o(y){H(v),y&&(E||(E=R(e,ie,{duration:400},!1)),E.run(0)),T=!1},d(y){y&&S(e),le(k,y),v&&v.d(),y&&E&&E.end(),d=!1,te(r)}}}function lt(t){let e,n,l=t[1]+1+"",o,c,s=t[5][t[0]]+"",u,m,i,f,p,_,b,E,T,d,r,a,h,k,v,y,C=t[6](t[2]),w=[];for(let I=0;I<C.length;I+=1)w[I]=Ye(Me(t,C,I));const X=I=>H(w[I],1,1,()=>{w[I]=null});return{c(){e=D("fieldset"),n=D("div"),o=A(l),c=A(`.
        `),u=A(s),m=P(),i=D("div"),f=D("button"),p=A("x"),_=P(),b=D("button"),E=A("+"),T=P(),d=D("button"),r=A("-"),a=P();for(let I=0;I<w.length;I+=1)w[I].c();this.h()},l(I){e=L(I,"FIELDSET",{class:!0});var B=M(e);n=L(B,"DIV",{class:!0});var U=M(n);o=Y(U,l),c=Y(U,`.
        `),u=Y(U,s),U.forEach(S),m=O(B),i=L(B,"DIV",{class:!0});var F=M(i);f=L(F,"BUTTON",{class:!0});var K=M(f);p=Y(K,"x"),K.forEach(S),_=O(F),b=L(F,"BUTTON",{class:!0});var Q=M(b);E=Y(Q,"+"),Q.forEach(S),T=O(F),d=L(F,"BUTTON",{class:!0});var Z=M(d);r=Y(Z,"-"),Z.forEach(S),F.forEach(S),a=O(B);for(let G=0;G<w.length;G+=1)w[G].l(B);B.forEach(S),this.h()},h(){N(n,"class","naming svelte-187mbnt"),N(f,"class","svelte-187mbnt"),N(b,"class","svelte-187mbnt"),N(d,"class","svelte-187mbnt"),N(i,"class","unit-buttons svelte-187mbnt"),N(e,"class","unit svelte-187mbnt")},m(I,B){z(I,e,B),g(e,n),g(n,o),g(n,c),g(n,u),g(e,m),g(e,i),g(i,f),g(f,p),g(i,_),g(i,b),g(b,E),g(i,T),g(i,d),g(d,r),g(e,a);for(let U=0;U<w.length;U+=1)w[U]&&w[U].m(e,null);k=!0,v||(y=[V(f,"click",t[9]),V(b,"click",t[10](1)),V(d,"click",t[10](-1))],v=!0)},p(I,[B]){if((!k||B&2)&&l!==(l=I[1]+1+"")&&$(o,l),(!k||B&33)&&s!==(s=I[5][I[0]]+"")&&$(u,s),B&477){C=I[6](I[2]);let U;for(U=0;U<C.length;U+=1){const F=Me(I,C,U);w[U]?(w[U].p(F,B),j(w[U],1)):(w[U]=Ye(F),w[U].c(),j(w[U],1),w[U].m(e,null))}for(x(),U=C.length;U<w.length;U+=1)X(U);ee()}},i(I){if(!k){for(let B=0;B<C.length;B+=1)j(w[B]);fe(()=>{k&&(h||(h=R(e,ie,{duration:400},!0)),h.run(1))}),k=!0}},o(I){w=w.filter(Boolean);for(let B=0;B<w.length;B+=1)H(w[B]);h||(h=R(e,ie,{duration:400},!1)),h.run(0),k=!1},d(I){I&&S(e),le(w,I),I&&h&&h.end(),v=!1,te(y)}}}const Fe=39,Pe=14;function st(t,e,n){let l;q(t,_e,d=>n(5,l=d));let{uid:o=1}=e,{priority:c=0}=e,s=1,u=[],m=Array(5).fill(!1),i=[];const f=d=>Array(d).fill(0).map((a,h)=>a+h),p=d=>r=>{if(n(11,i=i.filter(h=>h.cast!==d)),r.target.value==="-1"){n(3,u=[...u,d]);return}if(r.target.value===""){n(3,u=u.filter(h=>h!==d)),n(11,i),n(4,m);return}n(3,u=u.filter(h=>h!==d));const a=r.target.value.split(",").map(h=>Number(h));i.push(...a.map(h=>({frame:h+d*(Pe+Fe),unit:c,cast:d,tag:m[d],elements:[]}))),n(11,i),n(4,m)},_=d=>r=>{const a=r.target.value.trim();let h=[];if(a.includes("-")){let k=0;for(const v of a.split("-").map(y=>Number(y)))k+=v,h.push(k)}else h=a.split(",").map(k=>Number(k));if(n(11,i=i.filter(k=>k.cast!==d)),h.some(k=>isNaN(k)||k>6e3)||h.length>150){n(11,i),n(4,m);return}n(11,i=i.filter(k=>k.cast!==d)),i.push(...h.map(k=>({frame:k+d*(Pe+Fe),unit:c,cast:d,tag:m[d],elements:[]}))),n(11,i),n(4,m)};function b(){ae.update(d=>d.filter(r=>r!==o))}function E(d){return()=>{let h=Math.max(1,Math.min(5,s+d));d<0&&n(11,i=i.filter(k=>k.cast<h)),n(2,s=h)}}function T(d){m[d]=this.checked,n(4,m)}return t.$$set=d=>{"uid"in d&&n(0,o=d.uid),"priority"in d&&n(1,c=d.priority)},t.$$.update=()=>{if(t.$$.dirty&12&&n(3,u=u.filter(d=>d<s)),t.$$.dirty&2064){for(const d of i)d.tag=m[d.cast];n(11,i),n(4,m)}t.$$.dirty&2050&&i.map(d=>{d.unit=c}),t.$$.dirty&2050&&Qe.update(d=>(d[c]=i,d))},[o,c,s,u,m,l,f,p,_,b,E,i,T]}class rt extends oe{constructor(e){super(),ue(this,e,st,lt,ce,{uid:0,priority:1})}}function at(t,e){let n,l=0,o=0;const c=m=>{const i=m.clientX,f=m.clientY;l=i,o=f,n=setTimeout(()=>{const p=Math.abs(i-l)<5,_=Math.abs(f-o)<5;p&&_&&t.dispatchEvent(new CustomEvent("longpress"))},e)},s=m=>{l=m.clientX,o=m.clientY},u=()=>{clearTimeout(n)};return t.addEventListener("pointerdown",c),t.addEventListener("pointermove",s),t.addEventListener("pointerup",u),{update(m){e=m},destroy(){t.removeEventListener("pointerdown",c),t.removeEventListener("pointermove",s),t.removeEventListener("pointerup",u)}}}function it(t,e=!1){let n=!1,l=0,o=0;const c=i=>{l=i.pageY,n=!0,t.dispatchEvent(new CustomEvent("moveStart"))},s=i=>{n&&e&&(i.preventDefault(),o=i.pageY-l,l=i.pageY,t.dispatchEvent(new CustomEvent("moving",{detail:{value:o}})))},u=i=>{n&&(l=0,n=!1,t.dispatchEvent(new CustomEvent("moveEnd")))},m=i=>{e&&i.preventDefault()};return t.addEventListener("pointerdown",c,{capture:!1}),t.addEventListener("pointermove",s,{capture:!1}),t.addEventListener("pointerup",u,{capture:!1}),t.addEventListener("touchstart",m),{update(i){e=i},destroy(){t.removeEventListener("pointerdown",c),t.removeEventListener("pointermove",s),t.removeEventListener("pointerup",s),t.removeEventListener("touchstart",m)}}}function ot(t){let e,n,l,o;return{c(){e=D("div"),this.h()},l(c){e=L(c,"DIV",{class:!0});var s=M(e);s.forEach(S),this.h()},h(){N(e,"class","top svelte-10dd8lh"),de(e,"shadow",t[1])},m(c,s){z(c,e,s),t[12](e),l||(o=[Se(at.call(null,e,1600)),Se(n=it.call(null,e,t[1])),V(e,"longpress",t[11]),V(e,"moving",t[2]),V(e,"moveEnd",t[3]),V(e,"moveStart",t[4])],l=!0)},p(c,[s]){n&&he(n.update)&&s&2&&n.update.call(null,c[1]),s&2&&de(e,"shadow",c[1])},i:se,o:se,d(c){c&&S(e),t[12](null),l=!1,te(o)}}}function ut(t,e){t&&(t.style.minHeight=`${e}px`)}function ct(t,e,n){let{frames:l}=e,{delay:o=0}=e,{topDiff:c=0}=e,{breaks:s=[]}=e,{frameSize:u=7}=e,m=0,i=o,f=!1,p=[],_;function b(a){const h=a.detail.value;h!==void 0&&(m+=h,n(5,o=Math.max(0,i+Math.round(m/u))))}function E(a){i=o,m=0}function T(a){i=o,m=0}const d=()=>{n(1,f=!f)};function r(a){ve[a?"unshift":"push"](()=>{_=a,n(0,_),n(5,o),n(9,u)})}return t.$$set=a=>{"frames"in a&&n(6,l=a.frames),"delay"in a&&n(5,o=a.delay),"topDiff"in a&&n(7,c=a.topDiff),"breaks"in a&&n(8,s=a.breaks),"frameSize"in a&&n(9,u=a.frameSize)},t.$$.update=()=>{if(t.$$.dirty&545&&_&&n(0,_.style.paddingTop=`${o*u}px`,_),t.$$.dirty&705&&_){const a=[];let h=[],k=0;for(const v of l){const y=document.createElement("div");if(y.style.flex="1",y.style.height=`${u}px`,y.classList.add(`c-${v.cast}`),a[v.frame]===void 0){const C=document.createElement("div");C.classList.add("mini-container"),C.style.top=`${(v.frame-c-k)*u}px`,C.appendChild(y),a[v.frame]=C,k++}else a[v.frame].appendChild(y)}h=a.filter(v=>v!==void 0),_==null||_.replaceChildren(...h),l.length>0&&ut(_,u*(l[l.length-1].frame-c+2)),n(10,p=[])}if(t.$$.dirty&1281&&_){if(_.children.length>0){for(const a of p)_.children[a[0]].children[a[1]].classList.remove("break");for(const a of s)_.children[a[0]].children[a[1]].classList.add("break")}n(10,p=s.slice())}},[_,f,b,E,T,o,l,c,s,u,p,d,r]}class ft extends oe{constructor(e){super(),ue(this,e,ct,ot,ce,{frames:6,delay:5,topDiff:7,breaks:8,frameSize:9})}}function ht(t){const e=t-1;return e*e*e+1}function Oe(t,{delay:e=0,duration:n=400,easing:l=ht,axis:o="y"}={}){const c=getComputedStyle(t),s=+c.opacity,u=o==="y"?"height":"width",m=parseFloat(c[u]),i=o==="y"?["top","bottom"]:["left","right"],f=i.map(r=>`${r[0].toUpperCase()}${r.slice(1)}`),p=parseFloat(c[`padding${f[0]}`]),_=parseFloat(c[`padding${f[1]}`]),b=parseFloat(c[`margin${f[0]}`]),E=parseFloat(c[`margin${f[1]}`]),T=parseFloat(c[`border${f[0]}Width`]),d=parseFloat(c[`border${f[1]}Width`]);return{delay:e,duration:n,easing:l,css:r=>`overflow: hidden;opacity: ${Math.min(r*20,1)*s};${u}: ${r*m}px;padding-${i[0]}: ${r*p}px;padding-${i[1]}: ${r*_}px;margin-${i[0]}: ${r*b}px;margin-${i[1]}: ${r*E}px;border-${i[0]}-width: ${r*T}px;border-${i[1]}-width: ${r*d}px;`}}function mt(t,e,n,l){let o=Array(e).fill(0),c=Array(e).fill(0),s=Array(e);for(let _=0;_<e;_++)s[_]=[];let u=0,m=0,i=0;const f=(_,b)=>{let E=0;for(;o[_]+E<t[_].length;){const T=o[_]+E;if(t[_][T].frame+n[_]-l[_]!=b)break;E++}return E},p=()=>{let _=Number.MAX_SAFE_INTEGER,b=0;for(let E=e-1;E>=0;E--)if(o[E]<t[E].length){const T=t[E][o[E]].frame+n[E]-l[E];T<=_&&(b=E,_=T)}return b};for(m=-1,i=Math.min(...n);o.some((_,b)=>_<t[b].length);){u=p();const _=t[u][o[u]],b=_.frame+n[u]-l[u];b-i>20&&s[u].push([c[u],0,"gap more than 20 frames"]),u===m&&!_.tag&&s[u].push([c[u],0,"same unit in a row"]);let E={},T=1,d=1;for(let r=0;r<e;r++){const a=f(r,b);if(a!==0){if(E[`${a}`]?E[`${a}`].unshift(r):E[`${a}`]=[r],o[r]+=a,c[r]++,a>=d){T=d,d=a;continue}a>T&&(T=a)}}if(u=E[`${d}`][0],d>T)for(let r=T;r<d;r++)t[u][o[u]+r-d].tag||s[u].push([c[u]-1,r,"packed frame without pair"]);i=b,m=u}return s}function Ve(t,e,n){const l=t.slice();return l[15]=e[n],l[17]=n,l}function je(t,e,n){const l=t.slice();return l[15]=e[n],l[18]=e,l[17]=n,l}function ze(t,e,n){const l=t.slice();return l[15]=e[n],l[19]=e,l[17]=n,l}function Xe(t,e){let n,l,o=`Delay for prio ${e[17]+1} | unit ${e[15]+1}`,c,s,u,m,i,f,p,_,b,E,T;function d(){e[10].call(m,e[15])}return{key:t,first:null,c(){n=D("div"),l=D("label"),c=A(o),u=P(),m=D("input"),f=P(),p=D("input"),b=P(),this.h()},l(r){n=L(r,"DIV",{class:!0});var a=M(n);l=L(a,"LABEL",{for:!0,class:!0});var h=M(l);c=Y(h,o),h.forEach(S),u=O(a),m=L(a,"INPUT",{type:!0,min:!0,max:!0,name:!0,class:!0}),f=O(a),p=L(a,"INPUT",{type:!0,min:!0,class:!0}),b=O(a),a.forEach(S),this.h()},h(){N(l,"for",s=`prio-${e[17]}`),N(l,"class","svelte-1oxbiub"),N(m,"type","range"),N(m,"min","0"),N(m,"max","100"),N(m,"name",i=`prio-${e[17]}`),N(m,"class","svelte-1oxbiub"),N(p,"type","number"),p.value=_=e[4][e[15]],N(p,"min","0"),N(p,"class","svelte-1oxbiub"),N(n,"class","control svelte-1oxbiub"),this.first=n},m(r,a){z(r,n,a),g(n,l),g(l,c),g(n,u),g(n,m),Ce(m,e[4][e[15]]),g(n,f),g(n,p),g(n,b),E||(T=[V(m,"change",d),V(m,"input",d),V(p,"input",function(){he(e[8](e[15]))&&e[8](e[15]).apply(this,arguments)})],E=!0)},p(r,a){e=r,a&8&&o!==(o=`Delay for prio ${e[17]+1} | unit ${e[15]+1}`)&&$(c,o),a&8&&s!==(s=`prio-${e[17]}`)&&N(l,"for",s),a&8&&i!==(i=`prio-${e[17]}`)&&N(m,"name",i),a&24&&Ce(m,e[4][e[15]]),a&24&&_!==(_=e[4][e[15]])&&p.value!==_&&(p.value=_)},d(r){r&&S(n),E=!1,te(T)}}}function He(t){let e,n,l,o,c,s=t[7](t[5])+"",u,m,i,f,p,_=t[3],b=[];for(let r=0;r<_.length;r+=1)b[r]=Re(je(t,_,r));const E=r=>H(b[r],1,1,()=>{b[r]=null});let T=t[3],d=[];for(let r=0;r<T.length;r+=1)d[r]=qe(Ve(t,T,r));return{c(){e=D("div");for(let r=0;r<b.length;r+=1)b[r].c();n=P(),l=D("div"),o=D("span"),c=A("There's "),u=A(s),m=A(" breaks."),i=P();for(let r=0;r<d.length;r+=1)d[r].c();this.h()},l(r){e=L(r,"DIV",{class:!0,style:!0});var a=M(e);for(let v=0;v<b.length;v+=1)b[v].l(a);n=O(a),l=L(a,"DIV",{class:!0});var h=M(l);o=L(h,"SPAN",{});var k=M(o);c=Y(k,"There's "),u=Y(k,s),m=Y(k," breaks."),k.forEach(S),i=O(h);for(let v=0;v<d.length;v+=1)d[v].l(h);h.forEach(S),a.forEach(S),this.h()},h(){N(l,"class","infobar svelte-1oxbiub"),de(l,"expand",pt),N(e,"class","container-visual svelte-1oxbiub"),Ie(e,"grid-template-columns","repeat("+t[3].length+",1fr) 4.5%")},m(r,a){z(r,e,a);for(let h=0;h<b.length;h+=1)b[h]&&b[h].m(e,null);g(e,n),g(e,l),g(l,o),g(o,c),g(o,u),g(o,m),g(l,i);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(l,null);t[12](e),p=!0},p(r,a){if(a&59){_=r[3];let h;for(h=0;h<_.length;h+=1){const k=je(r,_,h);b[h]?(b[h].p(k,a),j(b[h],1)):(b[h]=Re(k),b[h].c(),j(b[h],1),b[h].m(e,n))}for(x(),h=_.length;h<b.length;h+=1)E(h);ee()}if((!p||a&32)&&s!==(s=r[7](r[5])+"")&&$(u,s),a&90){T=r[3];let h;for(h=0;h<T.length;h+=1){const k=Ve(r,T,h);d[h]?d[h].p(k,a):(d[h]=qe(k),d[h].c(),d[h].m(l,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=T.length}(!p||a&8)&&Ie(e,"grid-template-columns","repeat("+r[3].length+",1fr) 4.5%")},i(r){if(!p){for(let a=0;a<_.length;a+=1)j(b[a]);fe(()=>{p&&(f||(f=R(e,Oe,{axis:"x"},!0)),f.run(1))}),p=!0}},o(r){b=b.filter(Boolean);for(let a=0;a<b.length;a+=1)H(b[a]);f||(f=R(e,Oe,{axis:"x"},!1)),f.run(0),p=!1},d(r){r&&S(e),le(b,r),le(d,r),t[12](null),r&&f&&f.end()}}}function Re(t){let e,n,l;function o(s){t[11](s,t[15])}let c={frameSize:Ze,frames:t[0][t[17]],topDiff:t[1][t[17]],breaks:t[5][t[17]]};return t[4][t[15]]!==void 0&&(c.delay=t[4][t[15]]),e=new ft({props:c}),ve.push(()=>xe(e,"delay",o)),{c(){ge(e.$$.fragment)},l(s){be(e.$$.fragment,s)},m(s,u){ye(e,s,u),l=!0},p(s,u){t=s;const m={};u&1&&(m.frames=t[0][t[17]]),u&2&&(m.topDiff=t[1][t[17]]),u&32&&(m.breaks=t[5][t[17]]),!n&&u&24&&(n=!0,m.delay=t[4][t[15]],et(()=>n=!1)),e.$set(m)},i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){H(e.$$.fragment,s),l=!1},d(s){ke(e,s)}}}function qe(t){let e,n,l=t[17]+1+"",o,c,s=t[4][t[15]]-t[1][t[17]]+t[6]+"",u,m;return{c(){e=D("span"),n=A("p"),o=A(l),c=A(":"),u=A(s),m=P()},l(i){e=L(i,"SPAN",{});var f=M(e);n=Y(f,"p"),o=Y(f,l),c=Y(f,":"),u=Y(f,s),m=O(f),f.forEach(S)},m(i,f){z(i,e,f),g(e,n),g(e,o),g(e,c),g(e,u),g(e,m)},p(i,f){f&90&&s!==(s=i[4][i[15]]-i[1][i[17]]+i[6]+"")&&$(u,s)},d(i){i&&S(e)}}}function dt(t){let e,n=[],l=new Map,o,c,s,u=t[3];const m=f=>f[15];for(let f=0;f<u.length;f+=1){let p=ze(t,u,f),_=m(p);l.set(_,n[f]=Xe(_,p))}let i=t[3].length>0&&He(t);return{c(){e=D("div");for(let f=0;f<n.length;f+=1)n[f].c();o=P(),i&&i.c(),c=re(),this.h()},l(f){e=L(f,"DIV",{class:!0});var p=M(e);for(let _=0;_<n.length;_+=1)n[_].l(p);p.forEach(S),o=O(f),i&&i.l(f),c=re(),this.h()},h(){N(e,"class","container-controls svelte-1oxbiub")},m(f,p){z(f,e,p);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(e,null);z(f,o,p),i&&i.m(f,p),z(f,c,p),s=!0},p(f,[p]){p&280&&(u=f[3],n=Ke(n,p,m,1,f,u,l,e,$e,Xe,null,ze)),f[3].length>0?i?(i.p(f,p),p&8&&j(i,1)):(i=He(f),i.c(),j(i,1),i.m(c.parentNode,c)):i&&(x(),H(i,1,1,()=>{i=null}),ee())},i(f){s||(j(i),s=!0)},o(f){H(i),s=!1},d(f){f&&S(e);for(let p=0;p<n.length;p+=1)n[p].d();f&&S(o),i&&i.d(f),f&&S(c)}}}const Ze=9;let pt=!1;function _t(t,e,n){let l,o,c,s,u;q(t,ae,r=>n(3,c=r)),q(t,J,r=>n(4,s=r)),q(t,Qe,r=>n(9,u=r));let m=Array(6).fill([]),i=Array(6).fill(0),f;const p=r=>{let a=0;for(const h of r)a+=h.length;return a},_=(r,a)=>r.frame!==a.frame?r.frame-a.frame:r.cast!==a.cast?r.cast-a.cast:0,b=r=>a=>{if(a.preventDefault(),a.target){const h=a.target;h.value=`${Math.max(0,Number(h.value))}`,pe(J,s[r]=Number(h.value),s)}else return};function E(r){s[r]=tt(this.value),J.set(s)}function T(r,a){t.$$.not_equal(s[a],r)&&(s[a]=r,J.set(s))}function d(r){ve[r?"unshift":"push"](()=>{f=r,n(2,f),n(3,c)})}return t.$$.update=()=>{if(t.$$.dirty&521)for(let r=0;r<c.length;r++)n(0,m[r]=u[r].slice().sort(_),m),m[r][0]!==void 0&&n(1,i[r]=m[r][0].frame,i);t.$$.dirty&2&&n(6,l=Math.max(...i)),t.$$.dirty&27&&n(5,o=mt(m,c.length,s,i)),t.$$.dirty&12&&f&&n(2,f.style.backgroundSize=`${(100-4.5)/c.length}% ${Ze}px`,f)},[m,i,f,c,s,o,l,p,b,u,E,T,d]}class vt extends oe{constructor(e){super(),ue(this,e,_t,dt,ce,{})}}function Ge(t,e,n){const l=t.slice();return l[8]=e[n],l}function We(t){let e,n,l,o,c,s,u,m,i,f,p,_,b,E,T,d,r,a,h,k,v,y,C,w,X,I,B;return{c(){e=D("div"),n=D("button"),l=A("X"),o=P(),c=D("p"),s=A(`You can add up to 6 units. 
            You can remove a unit by clicking the [X] button on the unit card.`),u=P(),m=D("p"),i=A(`You can add up to 5 casts for each unit using the [+] button 
            and remove a cast at the end with the [-] button. 
            Ticking the checkbox makes an ability be TAG, i.e. allow self-chaining.`),f=P(),p=D("p"),_=A(`You can also add an ability with Custom frames. 
            There are 2 acceptables formats. Comma (,) and dash(-) seperated. e.g.`),b=P(),E=D("ul"),T=D("li"),d=A('BS: "42,48,54,60,66,72,78,84,90"'),r=P(),a=D("li"),h=A('BS: "42-6-6-6-6-6-6-6-6"'),k=P(),v=D("p"),y=A(`The selected skills can be seen at the bottom, 
            each cast is represented with a different colour.
            Breaks get red-ish stripes on them. 
            The unit order on the grid is from left to right, 
            like this 1→2→3 etc based on priority.`),C=P(),w=D("p"),X=A(`You can press hold for a bit on a unit on the plot 
            which unlocks their frames and you can move em 
            around by dragging. 
            If you long press again they lock.`),this.h()},l(U){e=L(U,"DIV",{class:!0});var F=M(e);n=L(F,"BUTTON",{class:!0});var K=M(n);l=Y(K,"X"),K.forEach(S),o=O(F),c=L(F,"P",{class:!0});var Q=M(c);s=Y(Q,`You can add up to 6 units. 
            You can remove a unit by clicking the [X] button on the unit card.`),Q.forEach(S),u=O(F),m=L(F,"P",{class:!0});var Z=M(m);i=Y(Z,`You can add up to 5 casts for each unit using the [+] button 
            and remove a cast at the end with the [-] button. 
            Ticking the checkbox makes an ability be TAG, i.e. allow self-chaining.`),Z.forEach(S),f=O(F),p=L(F,"P",{class:!0});var G=M(p);_=Y(G,`You can also add an ability with Custom frames. 
            There are 2 acceptables formats. Comma (,) and dash(-) seperated. e.g.`),G.forEach(S),b=O(F),E=L(F,"UL",{});var ne=M(E);T=L(ne,"LI",{});var Ee=M(T);d=Y(Ee,'BS: "42,48,54,60,66,72,78,84,90"'),Ee.forEach(S),r=O(ne),a=L(ne,"LI",{});var we=M(a);h=Y(we,'BS: "42-6-6-6-6-6-6-6-6"'),we.forEach(S),ne.forEach(S),k=O(F),v=L(F,"P",{class:!0});var Te=M(v);y=Y(Te,`The selected skills can be seen at the bottom, 
            each cast is represented with a different colour.
            Breaks get red-ish stripes on them. 
            The unit order on the grid is from left to right, 
            like this 1→2→3 etc based on priority.`),Te.forEach(S),C=O(F),w=L(F,"P",{class:!0});var Ne=M(w);X=Y(Ne,`You can press hold for a bit on a unit on the plot 
            which unlocks their frames and you can move em 
            around by dragging. 
            If you long press again they lock.`),Ne.forEach(S),F.forEach(S),this.h()},h(){N(n,"class","exit svelte-1yij6hm"),N(c,"class","svelte-1yij6hm"),N(m,"class","svelte-1yij6hm"),N(p,"class","svelte-1yij6hm"),N(v,"class","svelte-1yij6hm"),N(w,"class","svelte-1yij6hm"),N(e,"class","help svelte-1yij6hm")},m(U,F){z(U,e,F),g(e,n),g(n,l),g(e,o),g(e,c),g(c,s),g(e,u),g(e,m),g(m,i),g(e,f),g(e,p),g(p,_),g(e,b),g(e,E),g(E,T),g(T,d),g(E,r),g(E,a),g(a,h),g(e,k),g(e,v),g(v,y),g(e,C),g(e,w),g(w,X),I||(B=V(n,"click",t[3]),I=!0)},p:se,d(U){U&&S(e),I=!1,B()}}}function Je(t,e){let n,l,o;function c(...s){return e[5](e[8],...s)}return l=new rt({props:{uid:e[8],priority:e[1].findIndex(c)}}),{key:t,first:null,c(){n=re(),ge(l.$$.fragment),this.h()},l(s){n=re(),be(l.$$.fragment,s),this.h()},h(){this.first=n},m(s,u){z(s,n,u),ye(l,s,u),o=!0},p(s,u){e=s;const m={};u&2&&(m.uid=e[8]),u&2&&(m.priority=e[1].findIndex(c)),l.$set(m)},i(s){o||(j(l.$$.fragment,s),o=!0)},o(s){H(l.$$.fragment,s),o=!1},d(s){s&&S(n),ke(l,s)}}}function gt(t){let e,n,l,o,c,s,u,m,i,f,p=[],_=new Map,b,E,T,d,r,a=t[0]&&We(t),h=t[1];const k=v=>v[8];for(let v=0;v<h.length;v+=1){let y=Ge(t,h,v),C=k(y);_.set(C,p[v]=Je(C,y))}return E=new vt({}),{c(){a&&a.c(),e=P(),n=D("div"),l=D("div"),o=D("button"),c=A("How to use"),s=P(),u=D("button"),m=A("Add a unit"),i=P(),f=D("div");for(let v=0;v<p.length;v+=1)p[v].c();b=P(),ge(E.$$.fragment),this.h()},l(v){a&&a.l(v),e=O(v),n=L(v,"DIV",{class:!0});var y=M(n);l=L(y,"DIV",{class:!0});var C=M(l);o=L(C,"BUTTON",{class:!0});var w=M(o);c=Y(w,"How to use"),w.forEach(S),s=O(C),u=L(C,"BUTTON",{class:!0});var X=M(u);m=Y(X,"Add a unit"),X.forEach(S),C.forEach(S),i=O(y),f=L(y,"DIV",{class:!0});var I=M(f);for(let B=0;B<p.length;B+=1)p[B].l(I);I.forEach(S),b=O(y),be(E.$$.fragment,y),y.forEach(S),this.h()},h(){N(o,"class","svelte-1yij6hm"),N(u,"class","svelte-1yij6hm"),N(l,"class","flex-h svelte-1yij6hm"),N(f,"class","unit-flex svelte-1yij6hm"),N(n,"class","wrapper svelte-1yij6hm")},m(v,y){a&&a.m(v,y),z(v,e,y),z(v,n,y),g(n,l),g(l,o),g(o,c),g(l,s),g(l,u),g(u,m),g(n,i),g(n,f);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(f,null);g(n,b),ye(E,n,null),T=!0,d||(r=[V(o,"click",t[4]),V(u,"click",t[2])],d=!0)},p(v,[y]){v[0]?a?a.p(v,y):(a=We(v),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),y&2&&(h=v[1],x(),p=Ke(p,y,k,1,v,h,_,f,nt,Je,null,Ge),ee())},i(v){if(!T){for(let y=0;y<h.length;y+=1)j(p[y]);j(E.$$.fragment,v),T=!0}},o(v){for(let y=0;y<p.length;y+=1)H(p[y]);H(E.$$.fragment,v),T=!1},d(v){a&&a.d(v),v&&S(e),v&&S(n);for(let y=0;y<p.length;y+=1)p[y].d();ke(E),d=!1,te(r)}}}function bt(t,e,n){let l,o,c;q(t,J,p=>n(6,l=p)),q(t,_e,p=>n(7,o=p)),q(t,ae,p=>n(1,c=p));function s(){if(c.length>=6)return;const _=[0,1,2,3,4,5].find(b=>!c.includes(b));_!==void 0&&(ae.update(b=>[...b,_]),pe(_e,o[_]=`Unit ${_+1}`,o),pe(J,l[_]=0,l))}let u=!1;return[u,c,s,()=>{n(0,u=!u)},()=>{n(0,u=!u)},(p,_)=>_===p]}class Et extends oe{constructor(e){super(),ue(this,e,bt,gt,ce,{})}}export{Et as component};
